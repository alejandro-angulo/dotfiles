#!/bin/bash
# Swaylock wrapper
#
# Performs host-specific actions.
# Relies on hostname to differentiate devices.
#
# Set the `DRY_RUN` variable to see the comamnd that will be ran instead of
# actually running the command (DRY_RUN=1 swaylock).

HOST=$(cat /etc/hostname)
CMD="swaylock $*"

if [[ "$HOST" == "gospel" ]]; then
    # WARNING: Will not work if `-f` flag is set.
    CMD="hue-cli lights --id 1 --off; ${CMD}; hue-cli lights --id 1 --on"
fi

if [[ -z "$DRY_RUN" ]]; then
    sh -c "$CMD"
else
    echo "$CMD"
fi
